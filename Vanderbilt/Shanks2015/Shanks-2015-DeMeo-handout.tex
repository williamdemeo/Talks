%\documentclass[xcolor=dvipsnames,9pt]{beamer} 
%\documentclass[xcolor=dvipsnames,9pt,hide notes,mathserif]{beamer}
\documentclass[xcolor=dvipsnames,9pt,handout,hide notes,mathserif]{beamer}

\usepackage{pgfpages}
\usepackage{listings}
%\usepackage{enumitem}

%% For creating a handout:
\pgfpagesuselayout{4 on 1}[border shrink=5mm]
%\pgfpagesuselayout{4 on 1}[landscape, border shrink=5mm]
\pgfpageslogicalpageoptions{1}{border code=\pgfusepath{stroke}}
\pgfpageslogicalpageoptions{2}{border code=\pgfusepath{stroke}}
\pgfpageslogicalpageoptions{3}{border code=\pgfusepath{stroke}}
\pgfpageslogicalpageoptions{4}{border code=\pgfusepath{stroke}}
%\mode<handout>{\setbeamercolor{background canvas}{bg=black!5}}

\usepackage{pgfpages}
\usepackage{listings}
%\usepackage{enumitem}

%% For creating notes for the speaker:
%\setbeameroption{notes on second screen}
%\setbeameroption{show notes}

\setbeamerfont{structure}{family=\rmfamily,shape=\scshape} 
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{scalefnt}
\usepackage{amsmath}%
\usepackage{amsfonts}%
\usepackage{amssymb}%
%(wjd) added stmaryrd and enumerate packages
\usepackage{stmaryrd,enumerate}
\usepackage{graphicx}
\usepackage{comment}
\usetikzlibrary{matrix,arrows}

\usepackage{mathrsfs,textcomp}
\setbeamertemplate{navigation symbols}{}
\usepackage{verbatim}
\usepackage[mathcal]{euscript}

% This changes the color of alerted text to blue:
\definecolor{MyDarkBlue}{rgb}{0.2,0.2,0.7}
\definecolor{olivegreen}{cmyk}{0.64,0,0.95,0.40} % PANTONE 582
\setbeamercolor{alerted text}{fg=blue}
\newcommand{\emphcyan}[1]{\textcolor{MyDarkBlue}{\textbf{#1}}}
%\renewcommand{\alert}[1]{\textcolor{olivegreen}{\emph{#1}}}
\renewcommand{\alert}[1]{\textcolor{olivegreen}{#1}}
%\renewcommand{\alert}[1]{\textbf{{\emph{#1}}}}
% (default is red, but my slides are green and I don't like red and green together)

%\usecolortheme[named=OliveGreen]{structure} 
\usecolortheme[named=olivegreen]{structure} 
\setbeamertemplate{items}[square] 
\setbeamertemplate{blocks}[rounded][shadow=false]


% Commands for creating the ROTATING RECTANGLE
% Pass in a number which will be used to calculate the rotation angle.
% Example: Inside a tikzpicture environment, I would call 
%          \foreach \i in {0,...,11} { \eImageOfBZero{\i}  }
\newcommand{\eImageOfBZero}[1]{
  \pgfmathtruncatemacro{\r}{15*#1}
  \foreach \j in {1,2} {
    \draw[rotate around={\r:(-1,0.5)}] (\j -1, 0.5) node {$\j$};
    \pgfmathtruncatemacro{\x}{\j+3}
    \draw[rotate around={\r:(-1,0.5)}] (\j -1, -0.5) node {$\x$};
  }
  \draw[rotate around={\r:(-1,0.5)}] (-1, -0.5) node {$3$};
  \draw[rounded corners, dotted, rotate around={\r:(-1,0.5)}] (-1.5,-1) rectangle (1.5,1);
}

\newcommand{\eImageOfBOne}[1]{
  \pgfmathtruncatemacro{\r}{-15*#1}
  \foreach \j in {0,1,2} {
    \pgfmathtruncatemacro{\x}{10-\j}
    \draw[rotate around={\r:(-1,0.5)}] (\j -3, 1.5) node {$\x$};
  }
  \draw[rotate around={\r:(-1,0.5)}] (-3, .5) node {$7$} (-2, .5) node {$6$};
  \draw[rounded corners, dotted, rotate around={\r:(-1,0.5)}] (-3.5,0) rectangle (-0.5,2);
}

\newcommand{\eImageOfBTwo}[1]{
  \pgfmathtruncatemacro{\r}{15*#1}
  \foreach \j in {0,1,2} {
    \pgfmathtruncatemacro{\x}{15-\j}
    \draw[rotate around={\r:(1,0.5)}] (\j+1,1.5) node {$\x$};
  }
  \draw[rotate around={\r:(1,0.5)}] (3, .5) node {$11$} (2, .5) node {$12$};
  \draw[rounded corners, dotted,rotate around={\r:(1,0.5)}] (3.5,0) rectangle (0.5,2);
}


\input{wjd.def}

\mode<presentation>{\usetheme{boxes}}  %boxes,Pittsburgh JuanLesPins, PaloAlto, Singapore, Szeged, Warsaw, Boadilla
%\usetheme{Madrid}}
%\usetheme{boxes}  %boxes,Pittsburgh JuanLesPins, PaloAlto, Singapore, Szeged, Warsaw, Boadilla

\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage{times}
\usepackage[T1]{fontenc}
% Or whatever. Note that the encoding and the font should match. If T1
% does not look nice, try deleting the line with the fontenc.

\title{CSPs of Finite Commutative Idempotent Binars}

\author[William DeMeo]{William DeMeo\\
  {\small \url{williamdemeo@gmail.com}}\\
  {\small Iowa State University}\\[4pt]
  {\footnotesize joint work with}\\[4pt] 
  Cliff Bergman\\
  Jiali Li
}
%\institute[]{

\date[William DeMeo]{ % (optional, should be abbreviation of conference name)
  Shanks Workshop\\{\small Vanderbilt University}\\
  {\small May 30, 2015}}

\subject{Universal Algebra; Lattice Theory.}% (optional) inserted into PDF info catalog.

% TOC pops up at the beginning of each subsection:
\AtBeginSubsection[]{
  \begin{frame}<beamer>
    \frametitle{Outline}
    \tableofcontents[currentsection,currentsubsection]
  \end{frame}
}

% If you wish to uncover everything in a step-wise fashion, uncomment the following command: 
% \beamerdefaultoverlayspecification{<+->}

\begin{document}
\thicklines

%% \includeonlyframes{titlepage,problem,milestones,methods,knownresults,filterideal,MO,freese,OA,OAcong,OAEx2,PAP1,OAresults,OAextension,Limitations,OAextension2,conclusion,MO,Conclusion}


\frame[label=titlepage]{
  \titlepage
  \hfill {\footnotesize slides available at\\ 
\hfill \url{https://github.com/williamdemeo/Talks}}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 1: CSP dichotomy conjecture
\frame[label=problem1]{
  \frametitle{~}
  %  \framesubtitle{CSP dichotomy conjecture}

  \alert{General Problem:} Find Maltsev conditions that characterize the
  complexity of CSPs of universal algebras.

  \begin{overprint}
    \onslide<1|handout:1>
    \begin{block}{csp dichotomy conjecture}
      For a (finite, idempotent) algebra $\mathbf A$...
      \[
      \CSP (\mathbf A) \text{ is tractable } \; \Longleftrightarrow \;  \bA
      \text{ has a weak-nu term operation}  \phantom{\quad \text{ ?}}
      \]
    \end{block}
    \onslide<2|handout:2>
    \begin{block}{csp dichotomy conjecture}
      For a (finite, idempotent) algebra $\mathbf A$...
      \[
      \CSP (\mathbf A) \text{ is tractable } \; \Longrightarrow \;  \bA
      \text{ has a weak-nu term operation}  \quad \checkmark
      \]
    \end{block}
    \onslide<3-|handout:3-4>
    \begin{block}{csp dichotomy conjecture}
      For a (finite, idempotent) algebra $\mathbf A$...
      \[
      \CSP (\mathbf A) \text{ is tractable } \; \Longleftarrow \;  \bA
      \text{ has a weak-nu term operation}  \quad \text{ (?)}
      \]
    \end{block}
  \end{overprint}

  \vskip3mm

  \begin{overprint}
    \onslide<2|handout:2>The left-to-right direction is known. \\[5pt]
    \onslide<3|handout:3>The right-to-left direction is open. \\[5pt]
    \onslide<4-|handout:4>
    A \alert{weak near unanimity} (weak-nu) term operation is one that satisfies 
    \begin{align*}
      t(x, x, \dots, x)&\approx x \quad \text{ {\small (idempotent)}}\\[4pt]
      t(y, x, \dots, x) &\approx t(x, y, \dots, x) \approx \dots \approx
      t(x, x, \dots, y)
    \end{align*}
  \end{overprint}
  
  \vskip3mm

  \onslide<5-|handout:4>{
    A \emph{binary} operation $t(x,y)$ is weak-nu if 
    \begin{align*}
      t(x, x)&\approx x \qquad \text{  {\small (idempotent)}}\\[4pt]
      t(y, x) &\approx t(x, y)  \quad \text{  {\small (commutative)}}
    \end{align*}
    So let's try to prove (?) for 
    \alert{commutative idempotent binars}.
  }

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 2: Commutative Idempotent Binars
\frame[label=problem2]{
  \frametitle{Commutative Idempotent Binars}
  A \alert{CIB} is an algebra $\bA = \<A, \cdot\>$ satisfying
  $x\cdot y \approx y\cdot x$ and $x\cdot x \approx x$.

  \onslide<2->{
    \begin{block}{Question}
      Is every finite commutative idempotent binar tractable?
    \end{block}
    %  If the dichotomy conjecture is to hold, then the answer must be ``yes.''
    % We let **\cib** denote the variety of **commutative idempotent binars.**
    \vskip2mm
    \onslide<3->{
      First Example: a semilattice is an associative CIB.\\[4pt]
      Semilattices are tractable. % (in fact, they have \emph{finite width}).  
    }
    \vskip1cm
    \onslide<4->{
      Pause to consider more general case for a minute...
    }
  }
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 3: More well known facts

\frame[label=known]{
  \frametitle{General case}
  \begin{block}{Some well known facts}
  Let $\bA$ be a finite idempotent algebra. Let $\mathbf S_2$ be the 2-elt semilattice.
  %% \begin{block}{}
  \begin{align*}
    \V(\bA) \text{ is CP } &\Longleftrightarrow \; \bA \text{ has Malcev term}\\
    \onslide<3->{        &\Longrightarrow \; \bA \text{ has cube term}\\
      \onslide<4->{        &\Longrightarrow \; \V(\bA) \text{ is CM}\\
        \onslide<5->{        &\Longrightarrow \; \bS_2 \text{ is not in }
          \V(\bA)
        }
      }
    }
  \end{align*}
  \end{block}

  \begin{overprint}
    \onslide<2|handout:0>
    \begin{center}\includegraphics[height=2in]{figures/CP-cropped.png}\end{center}
    \onslide<3|handout:0>
    \begin{center}\includegraphics[height=2in]{figures/Cube-cropped.png}\end{center}
    \onslide<4|handout:0>
    \begin{center}\includegraphics[height=2in]{figures/CM-cropped.png}\end{center}
    \onslide<5|handout:1>
    \begin{center}\includegraphics[height=2in]{figures/NoSL-cropped.png}\end{center}
  \end{overprint}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 4: Some well known facts
\frame[label=new]{
  \frametitle{Recent results}

  \begin{overprint}
    \onslide<1|handout:1>
    $\bA=$ a finite idempotent algebra
    \onslide<3-|handout:2->
    $\bA=$ a finite {\bf CIB}
  \end{overprint}
  $\mathbf S_2=$ the 2-elt semilattice.

  \begin{align*}
    \V(\bA) \text{ is CP } &\Longleftrightarrow \quad \bA \text{ has a Malcev term}\\
    &\Longrightarrow \quad \bA \text{ has a cube term}\\
    &\Longrightarrow \quad \V(\bA) \text{ is CM}\\
    &\Longrightarrow \quad \bS_2 \text{ is not in } \V(\bA)
    \uncover<4-|handout:3->{ \\   &{\mathbf \Longrightarrow} \quad \bA \text{ has a cube term} }
    \uncover<6-|handout:4->{ \\   &{\mathbf \Longrightarrow} \quad \V(\bA) \text{ is CP } }
  \end{align*}

  \begin{columns}
    \begin{column}{0.4\textwidth}
      \begin{overprint}
        \onslide<1-3|handout:1-2>
        \begin{center}\includegraphics[height=1.25in]{figures/NoSL-cropped.png}\end{center}
        \onslide<4-|handout:3>
        \begin{center}\includegraphics[height=1.25in]{figures/CubeEquiv-cropped.png}\end{center}
        \onslide<6-|handout:4>
        \begin{center}\includegraphics[height=1.25in]{figures/CPequiv-cropped.png}\end{center}
      \end{overprint}
      \vskip1cm
    \end{column}
    \begin{column}{0.6\textwidth}
      \begin{overprint}
        \onslide<2|handout:1>
        \begin{itemize}
        \item cube term $\Longrightarrow$ CM\\[4pt]
          (Berman, Idziak, Markovi{\'c}, McKenzie, Valeriote, Willard 2010)
          %% ``Varieties with few subalgebras of powers'' 
          \\[10pt]
        \item CM $\Longrightarrow \; \bS_2$ is not in $\V(\bA)$\\[4pt]
          \emph{Proof:} $\bS_2 \in \V(\bA) \; \Rightarrow\; \bS_2^2 \in \V(\bA)$;\\[4pt]
          ~ \phantom{\emph{Proof:}} $\Con(\bS_2^2)$ is not modular.
        \end{itemize}
        \onslide<3-|handout:2->
        \underline{{\bf CIB case}}
        \begin{itemize}
        \item<3-|handout:3-> 1st reduction by cube-term blockers.
        \end{itemize}
        \begin{itemize}
        \item<5-|handout:4-> 2nd reduction by Kearnes-Tschantz.
        \end{itemize}
      \end{overprint}
    \end{column}
  \end{columns}
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 7
\frame[label=cube1]{
  \frametitle{First Reduction}
  \framesubtitle{by Cube-Term Blockers}

  Markovi{\'c}, M.~Mar{\'o}ti, McKenzie ($M^4$)\\
  ``Finitely related clones and algebras with cube terms'' (2012)

  \begin{block}{}
    %% \begin{definition}
    A \alert{cube-term blocker} (CTB) is a pair $(C, B)$ of subuniverses
    %% of $\bA$ 
    satisfying $\emptyset < C < B \leq A$ and for every
    $t(x_1, \dots, x_n)$ %% of $\bA$ 
    there is an index $i \in [n]$ with
    \[
    (\forall (b_1, \dots, b_n) \in B^n) (b_i \in C \longrightarrow t(b_1, \dots, b_n)\in C).
    \]
  \end{block}
  %% \end{definition}
  %% We call a set $D$ a (proper) \defn{ideal} of a \cib $\bA = \< A, \cdot\>$
  %%   if $D$ is a (proper) subset of $A$ satisfying $d\cdot a \in D$ for all 
  %% $d\in D$ and $a \in A$.
\onslide<2->$M^4$ prove a finite idempotent algebra has
  a cube term iff it has no CTB.  

  \vfill
  \onslide<3->{
    \begin{lemma}
      A finite CIB $\bA$ has a CTB if and only if 
      $\bS_2 \in \sansH \sansS (\bA)$.
    \end{lemma}
    \onslide<4->{
      \begin{proof}
        $(C, B)$ a CTB implies
        $\theta = C^2 \cup (B- C)^2$ a congruence with $\bB/\theta \cong \bS_2$. 
        \\[5pt]
        Conversely, suppose $\bS_2 \in \sansH \sansS (\bA)$, and $\bB$ is 
        a subalgebra of $\bA$ with $\bB/\theta$ a meet-SL for some $\theta$. 
        Let $C/\theta$ be the bottom of $\bB/\theta$, then $(C, B)$ is a CTB.
      \end{proof}
    }
  }
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 8
\frame[label=cube2]{
  \frametitle{Second Reduction}

  Kearnes and Tschantz\\
  ``Automorphism groups of squares and of free algebras'' (2007)

  \begin{lemma}
    If $V$ is an idempotent variety that is not congruence permutable, then there
    are subuniverses $U$ and $W$ of $\bF := \bF_V\{x, y\}$ %% (the 2-generated free
    %% algebra)
    satisfying 
    \begin{enumerate}[1.]
    \item $x\in U \cap W$
    \item $y \in U^c \cap W^c$
    \item $(U \times F) \cup (F \times W) \leq \bF^2$
    \end{enumerate}
  \end{lemma}
  \onslide<2->{
    For CIB's, either $U$ or $W$ will be an ideal.\\[4pt]
    This implies a CTB and a semilattice.}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 9
\frame[label=remaining]{
  \frametitle{Remaining Questions for Finite CIBs}

  \begin{block}{Conclusion}
    Let $\bA$ be a finite CIB. Then 
\[
\bS_2 \notin \sansH \sansS (\bA) \text{ if and
    only if } \V(\bA) \text{ is congruence permutable.}
\]
\onslide<2->(so $\CSP(\bA)$ tractable in this case)
  \end{block}

  \onslide<3->
  \begin{block}{Open Question}
    Let $\bA$ be a finite CIB with $\bS_2$ in $\sansH \sansS (\bA)$.  Is $\CSP(\bA)$ tractable?
  \end{block}

\onslide<4->  Recall, 
    if $\V(\bA)$ is  $\mathrm{SD}_\wedge$, then $\CSP(\bA)$ is
    tractable.

%% %% for every $\bA$, 
%%   %% \begin{itemize}
%%   %% \item<3->if $\bS_2 \in \V(\bA)$, then $\V(\bA)$ is not CM;
%%   %% \item<4->
%%     if $\V(\bA)$ is  $\mathrm{SD}_\wedge$, then $\CSP(\bA)$ is
%%     tractable.
%%   %% \end{itemize}

  \onslide<5->
  \begin{block}{Revised Question}
    Let $\bA$ be a finite CIB with $\bS_2$ in $\sansH \sansS (\bA)$,
    and $\V(\bA)$ not $\mathrm{SD}_\wedge$.\\[4pt] 
    Is $\CSP(\bA)$ tractable?
  \end{block}

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 10
\frame[label=example1]{
  \frametitle{Examples}

  \begin{columns}
    \begin{column}{0.4\textwidth}
  \begin{tabular}{c|cccc}
    $\cdot$ & 0 & 1 & 2 & 3\\
    \hline
    0 & 0 & 0 & 0 & 1\\
    1 & 0 & 1 & 3 & 2\\
    2 & 0 & 3 & 2 & 1\\
    3 & 1 & 2 & 1 & 3\\
  \end{tabular}
    \end{column}
    \begin{column}{0.6\textwidth}
      Cliff's idea: replace basic binary operation with a term from
      $\Clo(\bA)$, say $t(x,y) = (x\cdot(x\cdot y)) \cdot (y\cdot(x\cdot y))$.\\[4pt] 
      If $\<A, t\>$ tractable, then so is $\bA = \<A, \cdot\>$.
      \onslide<2->
      \begin{align*}
      \{t\} \subseteq \Clo(\bA) \quad &\Longrightarrow \quad \Rel(\Clo(\bA)) \subseteq \Rel(\{t\})\\
      &\Longrightarrow \quad \CSP(\bA) \leq_P \CSP\<A, t\>
      \end{align*}
    \end{column}
  \end{columns}
  \onslide<3->
  \begin{columns}
    \begin{column}{0.4\textwidth}
      \begin{tabular}{c|cccc}
        $t$ & 0 & 1 & 2 & 3\\
        \hline
        0 & 0 & 0 & 0 & 0\\
        1 & 0 & 1 & 3 & 2\\
        2 & 0 & 3 & 2 & 1\\
        3 & 0 & 2 & 1 & 3\\
        \end{tabular}
    \end{column}
    \begin{column}{0.6\textwidth}
      $\<A, t\> \text{  tractable } \quad  \Longrightarrow \quad \bA 
\text{  tractable }$ 
    \end{column}
  \end{columns}
}







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 11
\frame[label=examples2]{
  \frametitle{Examples}

  \begin{columns}
    \begin{column}{0.4\textwidth}
  \begin{tabular}{c|cccc}
    $\cdot$ & 0 & 1 & 2 & 3\\
    \hline
    0 & 0 & 0 & 1 & 1\\
    1 & 0 & 1 & 3 & 2\\
    2 & 1 & 3 & 2 & 1\\
    3 & 1 & 2 & 1 & 3\\
  \end{tabular}
    \end{column}
    \begin{column}{0.6\textwidth}
      Let $t_2(x,y) = x\cdot(x\cdot(x\cdot y)) \cdot y\cdot (y\cdot(x\cdot y))$.
    \end{column}
  \end{columns}

\vskip3mm

  \onslide<3->
  \begin{columns}
    \begin{column}{0.4\textwidth}
      \begin{tabular}{c|cccc}
        $t_2$ & 0 & 1 & 2 & 3\\
        \hline
        0 & 0 & 0 & 0 & 1\\
        1 & 0 & 1 & 3 & 2\\
        2 & 0 & 3 & 2 & 1\\
        3 & 1 & 2 & 1 & 3\\
        \end{tabular}
    \end{column}
    \begin{column}{0.6\textwidth}
      $\<A, t_2\> \text{  tractable }$ 
    \end{column}
  \end{columns}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 12
\frame[label=examples3]{
  \frametitle{Examples}

  \begin{columns}
    \begin{column}{0.4\textwidth}
  \begin{tabular}{c|cccc}
    $\cdot$ & 0 & 1 & 2 & 3\\
    \hline
    0 & 0 & 0 & 2 & 1\\
    1 & 0 & 1 & 3 & 2\\
    2 & 2 & 3 & 2 & 1\\
    3 & 1 & 2 & 1 & 3\\
  \end{tabular}
    \end{column}
    \begin{column}{0.6\textwidth}
\onslide<2->      Let $t_3(x,y) = \dots$ ?
\vskip2mm
\onslide<3->      Let $t_3(x,y,z) = \dots$ ?
    \end{column}
  \end{columns}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% 13
\frame[label=others]{
  \frametitle{}
...and about 25 others.

\begin{center}\includegraphics[height=2in]{figures/UACalcBergman.png}
%% \includegraphics[height=1.5in]{figures/BergmanDirectory.png}
\end{center}

To see them, load UACalc with files 
from the \alert{Bergman} directory at
\begin{center}
{\bf \url{https://github.com/UACalc/AlgebraFiles} }
\\[6pt]
\onslide<2->Thank you for listening!
\end{center}
}
\end{document}





